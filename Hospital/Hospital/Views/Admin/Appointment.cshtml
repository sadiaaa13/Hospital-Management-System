@model List<Hospital.Models.Appointment>

@{
    ViewBag.Title = "Appointments";
}

<div class="container">
    <h2 class="mt-4">Appointments</h2>

    @if (TempData["Message"] != null)
    {
        <div class="alert alert-success">@TempData["Message"]</div>
    }
    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger">@TempData["Error"]</div>
    }

    <table class="table table-striped table-hover">
        <thead class="thead-light">
            <tr>
                <th>Appointment ID</th>
                <th>Patient Name</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < Model.Count; i++)
            {
                <tr>
                    <td>@Model[i].a_id</td>
                    <td>@Model[i].a_name</td>
                    <td>@Model[i].date.ToString("yyyy-MM-dd HH:mm")</td>
                    <td>@Model[i].status</td>
                    <td>
                        @* Debugging output *@
                        <span class="d-none">@Model[i].status</span>  <!-- Temporarily add this line to see the status value -->

                        @if (Model[i].status != "Pending")
                        {
                            <a href="@Url.Action("CancelAppointment", "Admin", new { id = Model[i].a_id })" class="btn btn-danger btn-sm">Cancel</a>
                            <a href="@Url.Action("CompleteAppointment", "Admin", new { id = Model[i].a_id })" class="btn btn-primary btn-sm">Complete</a>
                        }
                        else if (Model[i].status == "Confirmed")
                        {
                            <a href="@Url.Action("CompleteAppointment", "Admin", new { id = Model[i].a_id })" class="btn btn-primary btn-sm">Complete</a>
                           
                        }
                        else if (Model[i].status == "Cancelled" || Model[i].status == "Completed")
                        {
                            <span class="text-muted">No actions available</span>
                        }

                        else
                        {
                            <span class="text-muted">Invalid status</span>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
